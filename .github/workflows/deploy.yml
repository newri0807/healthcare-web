name: Deploy React
on:
  push:
    branches: [ "main" ]
  workflow_dispatch:      # ğŸ‘ˆ RUN ë²„íŠ¼ ìƒì„±
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - name: SSH Remote Commands
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.SERVER_HOST }}
        username: ${{ secrets.SERVER_NAME }}
        key: ${{ secrets.SERVER_ACCESS_KEY }}
        script: |
          echo "ğŸš€ React (Vite) ë°°í¬ ì‹œì‘..."
          
          # 1. ìµœì‹  ì½”ë“œ ë°›ê¸° (í”„ë¡œì íŠ¸ í´ë”)
          cd ~/deploy/repo-healthcare
          git pull origin main
          
          # 2. ì‹¤í–‰ ìœ„ì¹˜ ì´ë™ (ì¤‘ìš”!)
          cd ~/deploy
          
          # 3. ë„ì»¤ ì¬ì‹œì‘
          # ì„œë¹„ìŠ¤ ì´ë¦„ì„ docker-compose.ymlê³¼ ë˜‘ê°™ì´ 'healthcare-web'ìœ¼ë¡œ!
          docker compose up -d --build healthcare-web
          
          echo "âœ… React ë°°í¬ ì™„ë£Œ!"
